<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hyfd.dao.mp.BillDiscountModelDetailDao">
	<sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    a.id,a.model_id,a.provider_id,a.name,a.discount,a.bill_pkg_id,a.province_code,a.city_code,a.update_date,a.update_user,a.create_date,a.create_user,
		b.name AS providerName ,c.name as billPkgName
  	</sql>

	<select id="getBillDiscountModelDetailList" resultType="java.util.Map">
	 select 
    <include refid="Base_Column_List" />
     from mp_bill_discount_model_detail a LEFT JOIN mp_provider b ON a.provider_id = b.id 
		LEFT JOIN mp_bill_pkg c ON a.bill_pkg_id = c.id 
	where a.del_flag=1 and b.del_flag=1 and c.del_flag=1
	<if test="id != null and id != ''"  >
       and a.id = #{id,jdbcType=VARCHAR}
    </if>
    <if test="modelId != null and modelId != ''"  >
       and a.model_id = #{modelId,jdbcType=VARCHAR}
    </if>
    <if test="providerId != null and providerId != ''"  >
       and a.provider_id = #{providerId,jdbcType=VARCHAR}
    </if>
    <if test="name != null and name != ''"  >
       and a.name = #{name,jdbcType=VARCHAR}
    </if>
    <if test="discount != null and discount != ''"  >
       and a.discount = #{discount,jdbcType=DECIMAL}
    </if>
    <if test="billPkgId != null and billPkgId != ''"  >
       and a.bill_pkg_id = #{billPkgId,jdbcType=VARCHAR}
    </if>
    <if test="provinceCode != null and provinceCode != ''"  >
       and a.province_code = #{provinceCode,jdbcType=VARCHAR}
    </if>
    <if test="cityCode != null and cityCode != ''"  >
       and a.city_code = #{cityCode,jdbcType=VARCHAR}
    </if>
    <if test="updateDate != null and updateDate != ''" >
       and a.update_date = #{updateDate,jdbcType=TIMESTAMP}
    </if>
    <if test="updateUser != null and updateUser != ''"  >
       and a.updateUser = #{updateUser,jdbcType=VARCHAR}
    </if>
    <if test="createDate != null and createDate != ''" >
       and a.create_date = #{createDate,jdbcType=TIMESTAMP}
    </if>
    <if test="createUser != null and createUser != ''"  >
       and a.create_user = #{createUser,jdbcType=VARCHAR}
    </if>
	ORDER BY create_date desc
	</select>
	
	<select id="selectCount" resultType="java.lang.Integer">
	select count(1) from mp_bill_discount_model_detail a 
	where a.del_flag=1
	<if test="id != null and id != ''"  >
       and a.id = #{id,jdbcType=VARCHAR}
    </if>
    <if test="modelId != null and modelId != ''"  >
       and a.model_id = #{modelId,jdbcType=VARCHAR}
    </if>
    <if test="providerId != null and providerId != ''"  >
       and a.provider_id = #{providerId,jdbcType=VARCHAR}
    </if>
    <if test="name != null and name != ''"  >
       and a.name = #{name,jdbcType=VARCHAR}
    </if>
    <if test="discount != null and discount != ''"  >
       and a.discount = #{discount,jdbcType=DECIMAL}
    </if>
    <if test="billPkgId != null and billPkgId != ''"  >
       and a.bill_pkg_id = #{billPkgId,jdbcType=VARCHAR}
    </if>
    <if test="provinceCode != null and provinceCode != ''"  >
       and a.province_code = #{provinceCode,jdbcType=VARCHAR}
    </if>
    <if test="cityCode != null and cityCode != ''"  >
       and a.city_code = #{cityCode,jdbcType=VARCHAR}
    </if>
    <if test="updateDate != null and updateDate != ''" >
       and a.update_date = #{updateDate,jdbcType=TIMESTAMP}
    </if>
    <if test="updateUser != null and updateUser != ''"  >
       and a.updateUser = #{updateUser,jdbcType=VARCHAR}
    </if>
    <if test="createDate != null and createDate != ''" >
       and a.create_date = #{createDate,jdbcType=TIMESTAMP}
    </if>
    <if test="createUser != null and createUser != ''"  >
       and a.create_user = #{createUser,jdbcType=VARCHAR}
    </if>
	</select>
	
	<insert id="insertSelective" parameterType="java.util.Map">
	<selectKey keyProperty="myuuid" resultType="String" order="BEFORE">select  replace(uuid(),'-','') as myuuid  from dual</selectKey>
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into mp_bill_discount_model_detail
    <trim prefix="(" suffix=")" suffixOverrides=",">
        id,
      <if test="modelId != null and modelId !=''">
        model_id,
      </if>
      <if test="providerId != null and providerId !=''">
        provider_id,
      </if>
      <if test="name != null and name !=''">
        name,
      </if>
      <if test="discount != null and discount !=''">
        discount,
      </if>
      <if test="billPkgId != null and billPkgId !=''">
        bill_pkg_id,
      </if>   
      <if test="provinceCode != null and provinceCode !=''">
         province_code,
      </if> 
      <if test="cityCode != null and cityCode !=''">
         city_code,
      </if> 
        create_date,     
      <if test="createUser != null and createUser !=''">
        create_user,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{myuuid,jdbcType=VARCHAR},
      <if test="modelId != null and modelId !=''">
        #{modelId,jdbcType=VARCHAR},
      </if>
      <if test="providerId != null and providerId !=''">
        #{providerId,jdbcType=VARCHAR},
      </if>
      <if test="name != null and name !=''">
         #{name,jdbcType=VARCHAR},
      </if>
      <if test="discount != null and discount !=''">
       #{discount,jdbcType=DECIMAL},
      </if>
      <if test="billPkgId != null and billPkgId !=''">
        #{billPkgId,jdbcType=VARCHAR},
      </if>   
      <if test="provinceCode != null and provinceCode !=''">
         #{provinceCode,jdbcType=VARCHAR},
      </if> 
      <if test="cityCode != null and cityCode !=''">
        #{cityCode,jdbcType=VARCHAR},
      </if> 
        CURRENT_TIMESTAMP,     
      <if test="createUser != null and createUser !=''">
        #{createUser,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
	
	<update id="billDiscountModelDetailDelByModelId">
	update mp_bill_discount_model_detail set del_flag=0 where model_id=#{modelId,jdbcType=VARCHAR}
	</update>
	
	<sql id="myWhere">
    <where>
    <if test="id != null and id != ''"  >
       and a.id = #{id,jdbcType=VARCHAR}
    </if>
    <if test="modelId != null and modelId != ''"  >
       and a.model_id = #{modelId,jdbcType=VARCHAR}
    </if>
    <if test="providerId != null and providerId != ''"  >
       and a.provider_id = #{providerId,jdbcType=VARCHAR}
    </if>
    <if test="name != null and name != ''"  >
       and a.name = #{name,jdbcType=VARCHAR}
    </if>
    <if test="discount != null and discount != ''"  >
       and a.discount = #{discount,jdbcType=DECIMAL}
    </if>
    <if test="billPkgId != null and billPkgId != ''"  >
       and a.bill_pkg_id = #{billPkgId,jdbcType=VARCHAR}
    </if>
    <if test="provinceCode != null and provinceCode != ''"  >
       and a.province_code = #{provinceCode,jdbcType=VARCHAR}
    </if>
    <if test="cityCode != null and cityCode != ''"  >
       and a.city_code = #{cityCode,jdbcType=VARCHAR}
    </if>
    <if test="updateDate != null and updateDate != ''" >
       and a.update_date = #{updateDate,jdbcType=TIMESTAMP}
    </if>
    <if test="updateUser != null and updateUser != ''"  >
       and a.updateUser = #{updateUser,jdbcType=VARCHAR}
    </if>
    <if test="createDate != null and createDate != ''" >
       and a.create_date = #{createDate,jdbcType=TIMESTAMP}
    </if>
    <if test="createUser != null and createUser != ''"  >
       and a.create_user = #{createUser,jdbcType=VARCHAR}
    </if>
    </where>
    </sql>
    
</mapper>