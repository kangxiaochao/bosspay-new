<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:sharding="http://shardingsphere.apache.org/schema/shardingsphere/sharding"
  xmlns:shardingsphere="http://shardingsphere.apache.org/schema/shardingsphere/datasource"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://shardingsphere.apache.org/schema/shardingsphere/sharding
                        http://shardingsphere.apache.org/schema/shardingsphere/sharding/sharding.xsd
                        http://shardingsphere.apache.org/schema/shardingsphere/datasource
                           http://shardingsphere.apache.org/schema/shardingsphere/datasource/datasource.xsd
                        http://www.springframework.org/schema/context
                      http://www.springframework.org/schema/context/spring-context-3.0.xsd">
  <!-- 事务关系表路由规则-->
  <sharding:standard-strategy id="groupOrderTableStrategy" sharding-column="id"
    algorithm-ref="groupOrderTableAlgorithmRef"/>

  <sharding:sharding-algorithm id="groupOrderTableAlgorithmRef" type="CLASS_BASED">
    <props>
      <prop key="strategy">standard</prop>
      <prop key="algorithmClassName">com.hyfd.sharding.GroupOrderTableAlgorithm</prop>
    </props>
  </sharding:sharding-algorithm>
  <context:property-placeholder ignore-unresolvable="true"/>

  <!-- 配置ShardingSphereDataSource -->
  <shardingsphere:data-source id="shardingDataSource" data-source-names="dataSourceXXX"
    rule-refs="shardingRule">
    <props>
      <prop key="sql-show">true</prop>
    </props>
  </shardingsphere:data-source>
  <!-- 配置sharding策略 -->
  <!--默认不分库(default-database-strategy-ref) 不分表(default-table-strategy-ref)-->
  <sharding:rule id="shardingRule" default-database-strategy-ref="" default-table-strategy-ref="">
    <sharding:table-rules>
      <sharding:table-rule logic-table="mp_order"
        actual-data-nodes="dataSourceXXX.mp_submit_order_202205"
        table-strategy-ref="groupOrderTableStrategy"
      />
    </sharding:table-rules>
  </sharding:rule>
</beans>